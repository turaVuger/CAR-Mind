<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ü–æ–º–æ—â–Ω–∏–∫ –ê–≤—Ç–æ</title>
    <style>
        :root {
            --bg-color: #f4f4f4;
            --section-bg: white;
            --text-color: #333;
            --input-bg: white;
            --button-bg: #007bff;
            --button-hover: #0056b3;
            --delete-bg: #dc3545;
            --tab-bg: #eee;
            --tab-active: white;
            --border-color: #ddd;
            --success: #28a745;
            --error: #dc3545;
        }
        body.dark {
            --bg-color: #1e1e1e;
            --section-bg: #2c2c2c;
            --text-color: #ddd;
            --input-bg: #333;
            --button-bg: #007bff;
            --button-hover: #0056b3;
            --delete-bg: #dc3545;
            --tab-bg: #444;
            --tab-active: #2c2c2c;
            --border-color: #555;
        }
        body { font-family: Arial, sans-serif; max-width: 900px; margin: 0 auto; padding: 20px; background: var(--bg-color); color: var(--text-color); position: relative; }
        h1, h2 { text-align: center; color: var(--text-color); }
        section { background: var(--section-bg); padding: 20px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        form { display: grid; gap: 15px; }
        input, select, button { padding: 12px; font-size: 16px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--input-bg); color: var(--text-color); }
        button { background: var(--button-bg); color: white; border: none; cursor: pointer; transition: background 0.3s; }
        button:hover { background: var(--button-hover); }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { border: 1px solid var(--border-color); padding: 10px; text-align: left; }
        th { background: var(--tab-bg); }
        .delete-btn { background: var(--delete-bg); color: white; padding: 6px 12px; border: none; cursor: pointer; }
        #car-select { font-size: 18px; margin-bottom: 20px; }
        #add-car-form { display: none; }
        .tab { display: inline-block; padding: 10px 20px; background: var(--tab-bg); cursor: pointer; margin-right: 5px; border-radius: 4px 4px 0 0; }
        .tab.active { background: var(--tab-active); border-bottom: none; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        canvas { max-width: 100%; margin-top: 20px; }
        #theme-toggle { position: fixed; top: 20px; right: 20px; z-index: 1000; padding: 10px; border-radius: 50%; width: 50px; height: 50px; }
        .reminder { color: #dc3545; font-weight: bold; }
        .warning { color: #ffc107; font-weight: bold; }
        .ok { color: #28a745; }
        img { max-width: 100%; height: auto; border: 1px solid var(--border-color); border-radius: 4px; margin-top: 10px; }
        .doc-reminder { margin-top: 20px; padding: 15px; background: rgba(220,53,69,0.1); border-radius: 8px; }

        /* Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        #toast-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 2000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .toast {
            min-width: 300px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.4s ease;
        }
        .toast.show {
            opacity: 1;
            transform: translateX(0);
        }
        .toast.success { background: var(--success); }
        .toast.error { background: var(--error); }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <button id="theme-toggle">üåô</button>
    <h1>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ü–æ–º–æ—â–Ω–∏–∫ –ê–≤—Ç–æ</h1>
    
    <!-- –û—Å—Ç–∞–ª—å–Ω–æ–π HTML –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–æ—Å—Ç–∞–≤–ª—è—é –ø—Ä–µ–∂–Ω–∏–º –¥–ª—è –∫—Ä–∞—Ç–∫–æ—Å—Ç–∏) -->
    <!-- ... (–≤–µ—Å—å –ø—Ä–µ–¥—ã–¥—É—â–∏–π HTML –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏) ... -->

    <div id="toast-container"></div>

    <script>
        const storageKey = 'proCarAssistantData_v5';
        let data = { cars: {}, theme: 'light' };
        let currentCarId = null;
        const today = new Date();

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showToast(message, type = 'success') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            container.appendChild(toast);

            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
            setTimeout(() => toast.classList.add('show'), 100);

            // –ê–≤—Ç–æ–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    if (container.contains(toast)) container.removeChild(toast);
                }, 400);
            }, 3000);
        }

        function loadData() {
            const saved = localStorage.getItem(storageKey);
            if (saved) data = JSON.parse(saved);
            document.body.classList.toggle('dark', data.theme === 'dark');
            renderCarSelect();
        }

        function saveData() {
            localStorage.setItem(storageKey, JSON.stringify(data));
        }

        // ... (–≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ renderCarSelect, getCurrentCar, updateAll, renderRecords, updateStats –∏ —Ç.–¥. ‚Äî –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
        document.getElementById('fuel-form').addEventListener('submit', e => {
            e.preventDefault();
            const car = getCurrentCar();
            if (!car) return showToast('–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∞–≤—Ç–æ!', 'error');

            // ... (–∫–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø—Ä–∞–≤–∫–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

            car.fuels.push({ /* ... */ });
            saveData();
            updateAll();
            e.target.reset();
            showToast('–ó–∞–ø—Ä–∞–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞!', 'success');
        });

        document.getElementById('expense-form').addEventListener('submit', e => {
            e.preventDefault();
            const car = getCurrentCar();
            if (!car) return showToast('–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∞–≤—Ç–æ!', 'error');

            // ... (–∫–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞)

            car.expenses.push({ /* ... */ });
            saveData();
            updateAll();
            e.target.reset();
            showToast('–†–∞—Å—Ö–æ–¥/–¢–û —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!', 'success');
        });

        document.getElementById('reminder-form').addEventListener('submit', e => {
            e.preventDefault();
            const car = getCurrentCar();
            if (!car) return showToast('–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∞–≤—Ç–æ!', 'error');

            // ... (–∫–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è)

            car.reminders.push({ /* ... */ });
            saveData();
            renderReminders();
            e.target.reset();
            showToast('–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –¢–û –¥–æ–±–∞–≤–ª–µ–Ω–æ!', 'success');
        });

        document.getElementById('docs-form').addEventListener('submit', e => {
            e.preventDefault();
            const car = getCurrentCar();
            if (!car) return showToast('–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∞–≤—Ç–æ!', 'error');

            // ... (–∫–æ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)

            saveData();
            updateAll();
            e.target.reset();
            showToast('–î–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!', 'success');
        });

        // –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∞–≤—Ç–æ
        document.getElementById('add-car-form').addEventListener('submit', e => {
            e.preventDefault();
            // ... (–∫–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è –∞–≤—Ç–æ)
            showToast(`–ê–≤—Ç–æ "${data.cars[id].name}" –¥–æ–±–∞–≤–ª–µ–Ω–æ!`, 'success');
            // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
        });

        // –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        // –í renderRecords –≤–Ω—É—Ç—Ä–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ delete-btn –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
        // showToast('–ó–∞–ø–∏—Å—å —É–¥–∞–ª–µ–Ω–∞', 'success');

        // –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π...

        loadData();
    </script>
</body>
</html>